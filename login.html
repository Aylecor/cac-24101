<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión</title>
    <link rel="stylesheet" type="text/css" href="./styles/formstyle.css">
    
    <!-- Favicon-->
    <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png" />
    <link rel="manifest" href="./favicon/site.webmanifest" />
    <link rel="mask-icon" href="./favicon/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />

    <!-- Font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@500&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <a href="index.html">CAC-Movies</a>
    </header>
    <main>
        <div class="fondo">
            <div class="container">
                <form action=""  id="form">
                    <h1>Iniciar Sesión</h1>    

                    <div class="form-input">
                        <input type="email" 
                        id="mail" 
                        name="mail" 
                        placeholder="Email" 
                        >
                        
                    </div>
            
                    <div class="form-input">
                        <input type="password"
                        id="password"
                        name="password"
                        placeholder="Contraseña"
                        >
                        
                    </div>

            
                    <button type="submit" value="enviar">Iniciar Sesión</button>
                    <p class="aviso" id="aviso"></p>
                    <p class="aviso2" id="aviso2"></p>
            
                    <div>
                        <a href="registro.html">Registrarse</a>
                    </div>
                                  
                </form>
    
            </div>
        </div>
        
        
    </main>

    <script>

        document.getElementById("form").addEventListener("submit", function(event) {
        event.preventDefault(); // Para prevenir la recarga de la pagina.
        });
        

        const mail = document.getElementById("mail");
        const pass = document.getElementById("password");
        const form = document.getElementById("form");
        const parrafo = document.getElementById("aviso");
        const parrafo2 = document.getElementById("aviso2");
        
        form.addEventListener("submit", e=>{

            let aviso = "";
            parrafo.innerHTML = ""; //Para borrar el texto de aviso cuando el usuario haya completado bien el form.
            let errorUsuario = false;
            let regexEmail = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

            console.log(regexEmail.test(mail.value)) //Prueba si el Mail tipeado es TRUE o FALSE
            if(!regexEmail.test(mail.value)){ //Si el mail no tiene el @, ni el ".com":
                errorUsuario = true;
                aviso += `El email no es valido. Debe tener @ y debe ser ".com" <br>`;
            }

            if(pass.value.length <6){ //Si la contraseña no es mayor de 6 digitos:
                errorUsuario = true;
                aviso += `La password es corta. Debe tener al menos 6 digitos. <br>`;
            }
                
            if(errorUsuario){
                parrafo.innerHTML = aviso; 
            }

            if (pass.value.length >=6 && regexEmail.test(mail.value)){
                parrafo2.innerHTML = "¡El formulario se ha enviado correctamente!"
            }else {parrafo2.innerHTML = ""}

            

            
        })
        
  
    </script>
    
</body>
</html>